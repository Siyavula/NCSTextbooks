\chapter{Combinations and Permutations}
\label{m:p12}

%\nts{Status: Content is complete. More exercises are needed.}

%\begin{syllabus}
%\item Generalise the fundamental counting principle (successive choices from $m_1$ then $m_2$ then $m_3$ Â… options create $m_1\times m_2 \times m_3 \times \ldots $ different combined options) and solve problems using the fundamental counting principle.
%\item extra
%\begin{itemize}
%\item tree diagrams and other methods of listing all options to generalise counting principle (successive choices)
%\item use investigate and solve problems involving the number of arrangements (permutations) of a number of discrete objects (when order matters) m! (m different items), m items selected from n
%\item investigate and solve problems involving the number of possible solutions when order is not important (combinations) of m items from n where all are different or distinguishable
%\item uses permutations and combinations to correctly calculate the probability of specified events occurring
%\item determines the odds of various games of chance and the probability of events, which depend on combinations and permutations
%\end{itemize}
%\end{syllabus}

\section{Introduction}
%Counting. 
Mathematics education began with counting. In the beginning, fingers, beans and buttons were used to help with counting, but these are only practical for small numbers. What happens when a large number of items must be counted?

This chapter focuses on how to use mathematical techniques to count combinations of items.

\section{Counting}
An important aspect of probability theory is the ability to determine the total number of possible outcomes when multiple events are considered.

For example, what is the total number of possible outcomes when a die is rolled and then a coin is tossed? The roll of a die has six possible outcomes ($1, 2, 3, 4, 5$ or $6$) and the toss of a coin, $2$ outcomes (head or tails). Counting the possible outcomes can be tedious.

\subsection{Making a List}
The simplest method of counting the total number of outcomes is by making a list:

\begin{center}
$1H, 1T, 2H, 2T, 3H, 3T, 4H, 4T, 5H, 5T, 6H, 6T$
\end{center}

or drawing up a table:

\begin{center}
\begin{tabular}{|c|c|}\hline
die & coin\\\hline\hline
$1$&$H$\\\hline
$1$&$T$\\\hline
$2$&$H$\\\hline
$2$&$T$\\\hline
$3$&$H$\\\hline
$3$&$T$\\\hline
$4$&$H$\\\hline
$4$&$T$\\\hline
$5$&$H$\\\hline
$5$&$T$\\\hline
$6$&$H$\\\hline
$6$&$T$\\\hline
\end{tabular}
\end{center}

Both these methods result in $12$ possible outcomes, but both these methods have a lot of repetition. Maybe there is a smarter way to write down the result?

\subsection{Tree Diagrams}
One method of eliminating some of the repetition is to use \textit{tree diagrams}. Tree diagrams are a graphical method of listing all possible combinations of events from a random experiment.

\begin{figure}[htbp]
\begin{center}
\begin{pspicture}(-4,0.5)(4,3)
%\psgrid
\psline(0,3)(-3,2)
\psline(0,3)(-2,2)
\psline(0,3)(-1,2)
\psline(0,3)(3,2)
\psline(0,3)(2,2)
\psline(0,3)(1,2)

\psline(1,2)(1.25,1)
\psline(1,2)(0.75,1)
\psline(-1,2)(-1.25,1)
\psline(-1,2)(-0.75,1)

\psline(2,2)(2.25,1)
\psline(2,2)(1.75,1)
\psline(-2,2)(-2.25,1)
\psline(-2,2)(-1.75,1)

\psline(3,2)(3.25,1)
\psline(3,2)(2.75,1)
\psline(-3,2)(-3.25,1)
\psline(-3,2)(-2.75,1)

\uput[l](-3,2){$1$}
\uput[l](-2,2){$2$}
\uput[l](-1,2){$3$}
\uput[r](3,2){$6$}
\uput[r](2,2){$5$}
\uput[r](1,2){$4$}

\rput(-3.25,0.75){$H$}
\rput(-2.75,0.75){$T$}
\rput(-2.25,0.75){$H$}
\rput(-1.75,0.75){$T$}
\rput(-1.25,0.75){$H$}
\rput(-0.75,0.75){$T$}
\rput(3.25,0.75){$T$}
\rput(2.75,0.75){$H$}
\rput(2.25,0.75){$T$}
\rput(1.75,0.75){$H$}
\rput(1.25,0.75){$T$}
\rput(0.75,0.75){$H$}

\psline[arrows=<->](-0.75,2)(0.75,2)
\psline[arrows=<->](-0.75,1)(0.75,1)
\rput*[fillcolor=white](0,1){coin}
\rput*[fillcolor=white](0,2){die}

\end{pspicture}
\end{center}
\caption{Example of a tree diagram. Each possible outcome is a branch of the tree.}
\label{fig:mcp:treediagram}
\end{figure}

\section{Notation}
\subsection{Factorial Notation}
For an integer $n$, the notation $n!$ (read $n$ factorial) represents:
\nequ{n\times (n-1) \times (n-2) \times \ldots \times 3 \times 2 \times 1}
with the following definition: $0! = 1$.

The factorial notation will be used often in this chapter.

\section{Fundamental Counting Principle}
The use of lists, tables and tree diagrams is only feasible for events with a few outcomes. When the number of outcomes grows, it is not practical to list the different possibilities and the fundamental counting principle is used.

The \textbf{fundamental counting principle} describes how to determine the total number of outcomes of a series of events.

Suppose that two experiments take place. The first experiment has $n_1$ possible outcomes, and the second has $n_2$ possible outcomes. Therefore, the first experiment, followed by the second experiment, will have a total of $n_1\times n_2$ possible outcomes. This idea can be generalised to $m$ experiments as the total number of outcomes for $m$ experiments is:
\nequ{n_1 \times n_2 \times n_3 \times \ldots \times n_m = \prod_{i=1}^m n_i}

$\prod$ is the multiplication equivalent of $\sum$.

Note: the order in which the experiments are done does not affect the total number of possible outcomes.

\begin{wex}{Lunch Special}{A take-away has a 4-piece lunch special which consists of a sandwich, soup, dessert and drink for R$25,00$. They offer the following choices for :\\
Sandwich: chicken mayonnaise, cheese and tomato, tuna, and ham and lettuce\\
Soup: tomato, chicken noodle, vegetable\\
Dessert: ice-cream, piece of cake\\
Drink: tea, coffee, coke, Fanta and Sprite.\\
How many possible meals are there?}
{\westep{Determine how many parts to the meal there are}
There are 4 parts: sandwich, soup, dessert and drink.

\westep{Identify how many choices there are for each part}
\begin{center}
\begin{tabular}{|c|c|c|c|c|}\hline
Meal component & Sandwich & Soup & Dessert & Drink\\\hline
Number of choices & $4$ & $3$ & $2$ & $5$\\\hline
\end{tabular}
\end{center}

\westep{Use the fundamental counting principle to determine how many different meals are possible}

\nequ{4\times 3 \times 2 \times 5 = 120}
So there are $120$ possible meals.}
\end{wex}

\section{Combinations}
The fundamental counting principle describes how to calculate the total number of outcomes when multiple independent events are performed together.

A more complex problem is determining how many combinations there are of selecting a group of objects from a set. Mathematically, a \textit{combination} is defined as an un-ordered collection of unique elements, or more formally, a subset of a set. For example, suppose you have fifty-two playing cards, and select five cards. The five cards would form a combination and would be a subset of the set of $52$ cards.

In a set, the order of the elements in the set does not matter. These are represented usually with curly braces. For example $\{2, 4, 6\}$ is a subset of the set $\{1, 2, 3, 4, 5, 6\}$. Since the order of the elements does not matter, only the specific elements are of interest. Therefore,
\nequ{\{2, 4, 6\} = \{6, 4, 2\}}
and $\{1, 1, 1\}$ is the same as $\{1\}$ because in a set the elements don't usually appear more than once.

So in summary we can say the following:
Given $S$, the set of all possible unique elements, a combination is a subset of the elements of $S$. The order of the elements in a combination is not important (two lists with the same elements in different orders are considered to be the same combination). Also, the elements cannot be repeated in a combination (every element appears once).

\subsection{Counting Combinations}
Calculating the number of ways that certain patterns can be formed is the beginning of \mbox{\textit{combinatorics}}, the study of combinations. Let $S$ be a set with $n$ objects. Combinations of $r$ objects from this set $S$ are subsets of $S$ having $r$ elements each (where the order of listing the elements does not distinguish two subsets).

\subsubsection{Combination Without Repetition}

When the order does not matter, but each object can be chosen only once, the number of combinations is:
\nequ{\frac{n!}{r!(n - r)!} = \binom{n}{r}}
where $n$ is the number of objects from which you can choose and $r$ is the number to be chosen.

For example, if you have $10$ numbers and wish to choose $5$ you would have $10!/(5!(10 - 5)!) = 252$ ways to choose.

For example how many possible $5$ card hands are there in a deck of cards with $52$ cards?

$52! / (5!(52-5)!) = 2\;598\;960$ combinations

\subsubsection{Combination with Repetition}

When the order does not matter and an object can be chosen more than once, then the number of combinations is:
\nequ{\frac{(n + r - 1)!}{r!(n - 1)!} = {\binom{n + r - 1}{r}} = {\binom{n + r - 1}{n - 1}}}
where $n$ is the number of objects from which you can choose and $r$ is the number to be chosen.

For example, if you have ten types of donuts to choose from and you want three donuts there are $(10 + 3 - 1)! / 3!(10 - 1)! = 220$ ways to choose.
%(see also multiset).
Note that in the following video permutations are mentioned. You will cover permutations in the next section.\\
Khan Academy video on combinations and probability:SIYAVULA-VIDEO:http://cnx.org/content/m39106/latest/#probability-1

\subsection{Combinatorics and Probability}
Combinatorics is quite useful in the computation of probabilities of events, as it can be used to determine exactly how many outcomes are possible in a given experiment.

\begin{wex}{Probability}
{At a school, learners each play $2$ sports. They can choose from netball, basketball, soccer, athletics, swimming, or tennis. What is the probability that a learner plays soccer and either netball, basketball or tennis?\\}
{
\westep{Identify what events we are counting} We count the events: soccer and netball, soccer and basketball, soccer and tennis. This gives three choices.
\westep{Calculate the total number of choices}
There are $6$ sports to choose from and we choose $2$ sports. There are \\$\binom{6}{2} = 6!/(2!(6-2)!)$ = 15 choices.
\westep{Calculate the probability} The probability is the number of events we are counting, divided by the total number of choices.\\
Probability = $\frac{3}{15}$ = $\frac{1}{5} = 0,2$
}
\end{wex}

\section{Permutations}
The concept of a combination did not consider the order of the elements of the subset to be important. A permutation is a combination with the order of a selection from a group being important. For example, for the set $\{1, 2, 3, 4, 5, 6\}$, the combination $\{1, 2, 3\}$ would be identical to the combination $\{3, 2, 1\}$, but these two combinations are different permutations, because the elements in the set are ordered differently.

More formally, a permutation is an ordered list without repetitions, perhaps missing some elements.

This means that $\{1, 2, 2, 3, 4, 5, 6\}$ and $\{1, 2, 4, 5, 5, 6\}$ are not permutations of the set $\{1, 2, 3, 4, 5, 6\}$.

Now suppose you have these objects:

$1, 2, 3$

Here is a list of all permutations of all three objects:

$1~2~3$; $\;$
$1~3~2$; $\;$
$2~1~3$; $\;$
$2~3~1$; $\;$
$3~1~2$; $\;$
$3~2~1$. $\;$

\subsection{Counting Permutations}
Let $S$ be a set with $n$ objects. Permutations of $r$ objects from this set $S$ refer to sequences of $r$ different elements of $S$ (where two sequences are considered different if they contain the same elements but in a different order). Formulas for the number of permutations and combinations are readily available and important throughout combinatorics.

It is easy to count the number of permutations of size $r$ when chosen from a set of size $n$ (with $r \le n$).

\begin{enumerate}
\item{Select the first member of the permutation out of $n$ choices, because there are $n$ distinct elements in the set.}
\item{Next, since one of the $n$ elements has already been used, the second member of the permutation has $(n - 1)$ elements to choose from the remaining set.}
\item{The third member of the permutation can be filled in $(n - 2)$ ways since $2$ have been used already.}
\item{This pattern continues until there are $r$ members on the permutation. This means that the last member can be filled in $(n - (r - 1) ) = (n - r + 1)$ ways.}
\item{Summarizing, we find that there is a total of
\nequ{n(n - 1)(n - 2) ... (n - r + 1)}
different permutations of $r$ objects, taken from a pool of $n$ objects. This number is denoted by $P(n, r)$ and can be written in factorial notation as:
\nequ{P(n, r) = \frac{n!}{(n-r)!}.}}
\end{enumerate}

For example, if we have a total of 5 elements, the integers $\{1, 2, 3, 4, 5\}$, how many ways are there for a permutation of three elements to be selected from this set? In this case, $n = 5$ and $r = 3$. Then, $P(5,3) = 5!/7! = 60!$.
Khan Academy video on permutations: SIYAVULA-VIDEO:http://cnx.org/content/m39103/latest/#probability-2
\begin{wex}{Permutations}{Show that a collection of $n$ objects has $n!$ permutations.}{Proof: Constructing an ordered sequence of $n$ objects is equivalent to choosing the position occupied by the first object, then choosing the position of the second object, and so on, until we have chosen the position of each of our $n$ objects.

There are n ways to choose a position for the first object. Once its position is fixed, we can choose from $(n-1)$ possible positions for the second object. With the first two placed, there are $(n-2)$ remaining possible positions for the third object; and so on. There are only two positions to choose from for the penultimate object, and the $nth$ object will occupy the last remaining position.

Therefore, according to the fundamental counting principle, there are $$n(n-1)(n-2)...2 \times 1 = n!$$ ways of constructing an ordered sequence of $n$ objects.
}
\end{wex}

\subsubsection{Permutation with Repetition}

When order matters and an object can be chosen more than once then the number of \\permutations is:
\nequ{n^r}
where $n$ is the number of objects from which you can choose and $r$ is the number to be chosen.

For example, if you have the letters A, B, C, and D and you wish to discover the number of ways of arranging them in three letter patterns (trigrams) you find that there are $4^3$ or $64$ ways. This is because for the first slot you can choose any of the four values, for the second slot you can choose any of the four, and for the final slot you can choose any of the four letters. Multiplying them together gives the total.

%\subsubsection{Permutation without Repetition}

%When the order matters and each object can be chosen only once, then the number of \\permutations is:
%\nequ{\frac{n!}{(n-r)!}}
%where $n$ is the number of objects from which you can choose and $r$ is the number to be chosen.

%For example, if you have five people and are going to choose three out of these, you will have 5!/(5-3)! = 60 permutations.

%Note that if n = r (meaning that the number of chosen elements is equal to the number of elements to choose from) then the formula becomes
%\nequ{\frac{n!}{(n-n)!} = \frac{n!}{0!} = n!}

%For example, if you have three people and you want to find out how many ways you may arrange them it would be 3! or $3 \times 2 \times 1$ = 6 ways. The reason for this is because you can choose from three for the initial slot, then you are left with only two to choose from for the second slot, and that leaves only one for the final slot. Multiplying them together gives the total.

\section{Applications}
\Extension{The Binomial Theorem}{
In mathematics, the binomial theorem is an important formula giving the expansion of powers of sums. Its simplest version reads

\nequ{(x+y)^n=\sum_{k=0}^n \binom{n}{k}x^ky^{n-k}}
\newpage

Whenever $n$ is a positive integer, the numbers

\nequ{\binom{n}{k}=\frac{n!}{k!(n-k)!}}

are the binomial coefficients (the coefficients in front of the powers).

For example, here are the cases n = 2, n = 3 and n = 4:

\begin{eqnarray*}
(x + y)^2 = x^2 + \mathbf{2}xy + y^2\\
(x + y)^3 = x^3 + \mathbf{3}x^2y + \mathbf{3}xy^2 + y^3\\
(x + y)^4 = x^4 + \mathbf{4}x^3y + \mathbf{6}x^2y^2 + \mathbf{4}xy^3 + y^4\\
\end{eqnarray*}

\begin{minipage}{0.55\textwidth}
The coefficients form a triangle, where each number is the sum of the two numbers above it:
\end{minipage}
\begin{minipage}{0.49\textwidth}
\scalebox{.65}
{
\begin{pspicture}(0,-1.1639062)(2.93375,1.1639062)
\usefont{T1}{ptm}{m}{n}
\rput(1.4046875,0.99046874){1}
\usefont{T1}{ptm}{m}{n}
\rput(1.0046875,0.49046874){1}
\usefont{T1}{ptm}{m}{n}
\rput(1.8046875,0.49046874){1}
\usefont{T1}{ptm}{m}{n}
\rput(0.7046875,-0.00953125){1}
\usefont{T1}{ptm}{m}{n}
\rput(1.4364063,-0.00953125){2}
\usefont{T1}{ptm}{m}{n}
\rput(2.1046875,-0.00953125){1}
\usefont{T1}{ptm}{m}{n}
\rput(0.3046875,-0.50953126){1}
\usefont{T1}{ptm}{m}{n}
\rput(2.4646876,-0.50953126){1}
\usefont{T1}{ptm}{m}{n}
\rput(0.73875,-1.0095313){4}
\usefont{T1}{ptm}{m}{n}
\rput(1.0254687,-0.50953126){3}
\usefont{T1}{ptm}{m}{n}
\rput(1.8254688,-0.50953126){3}
\usefont{T1}{ptm}{m}{n}
\rput(2.13875,-1.0095313){4}
\usefont{T1}{ptm}{m}{n}
\rput(1.433125,-1.0095313){6}
\usefont{T1}{ptm}{m}{n}
\rput(2.8046875,-1.0095313){1}
\usefont{T1}{ptm}{m}{n}
\rput(0.0046875,-1.0095313){1}
\psdots[dotsize=0.06](1.0378125,-1.3867188)
\psdots[dotsize=0.06](1.3578125,-1.3867188)
\psdots[dotsize=0.06](1.6978126,-1.3867188)
\end{pspicture} 
}
\end{minipage}\\
\vspace{0.5cm}

This formula and the triangular arrangement of the binomial coefficients, are often attributed to Blaise Pascal who described them in the 17th century. It was, however, known to the Chinese mathematician Yang Hui in the 13th century, the earlier Persian mathematician Omar KhayyÃ¡m in the 11th century, and the even earlier Indian mathematician Pingala in the 3rd century BC.

%\url{http://en.wikipedia.org/wiki/List_of_combinatorics_topics} for list of possible applications of combinatorics.}
}

\begin{wex}{Number Plates}
{The number plate on a car consists of any $3$ letters of the alphabet (excluding the vowels and '$Q$'), followed by any $3$ digits ($0$ to $9$). For a car chosen at random, what is the probability that the number plate starts with a '$Y$' and ends with an odd digit?}
{
\westep{Identify what events are counted} The number plate starts with a '$Y$', so there is only $1$ choice for the first letter, and ends with an odd digit, so there are $5$ choices for the last digit ($1, 3, 5, 7, 9$).
\westep{Find the number of events}
Use the counting principle. For each of the other letters, there are $20$ possible choices ($26$ in the alphabet, minus $5$ vowels and '$Q$') and $10$ possible choices for each of the other digits.\\ Number of events = $1 \times 20 \times 20 \times 10 \times 10 \times 5 = 200\;000$
\westep{Find the number of total number of possible number plates}
Use the counting principle. This time, the first letter and last digit can be anything.\\
Total number of choices = $20 \times 20 \times 20 \times 10 \times 10 \times 10 = 8\;000\;000$
\westep{Calculate the probability} The probability is the number of events we are counting, divided by the total number of choices.\\
Probability = $\frac{200\;000}{8\;000\;000} = \frac{1}{40} = 0,025$
}
\end{wex}

\begin{wex}{Factorial}
{Show that $$\frac{n!}{(n-1)!} = n$$}
{
\textbf{Method 1:} Expand the factorial notation.
$$\frac{n!}{(n-1)!}  =  \frac{n \times (n-1) \times (n-2) \times ... \times 2 \times 1}{(n-1) \times (n-2) \times ... \times 2 \times 1}$$
Cancelling the common factor of $(n-1) \times (n-2) \times ... \times 2 \times 1$ on the top and bottom leaves $n$.\\
So $\frac{n!}{(n-1)!} = n$\\

\textbf{Method 2:}
We know that $P(n,r) = \frac{n!}{(n-r)!}$ is the number of permutations of $r$ objects, taken from a pool of $n$ objects. In this case, $r=1$. To choose $1$ object from $n$ objects, there are $n$ choices.\\
So $\frac{n!}{(n-1)!} = n$\\

}
\end{wex}

\section{Exercises}
\begin{enumerate}
\item Tshepo and Sally go to a restaurant, where the menu is:\\
\begin{tabular}{|c|c|c|}
\hline
Starter & Main Course & Dessert \\
\hline
Chicken wings & Beef burger & Chocolate ice cream \\
Mushroom soup & Chicken burger &  Strawberry ice cream\\
Greek salad & Chicken curry &  Apple crumble\\
 & Lamb curry & Chocolate mousse\\
 & Vegetable lasagne & \\
\hline
\end{tabular}

\begin{enumerate}
\item How many different combinations (of starter, main course, and dessert) can Tshepo have?
\item Sally doesn't like chicken.  How many different combinations can she have?
\end{enumerate}

\item Four coins are thrown, and the outcomes recorded. How many different ways are there of getting three heads? First write out the possibilities, and then use the formula for combinations.

\item The answers in a multiple choice test can be $A, B, C, D,$ or $E$. In a test of $12$ questions, how many different ways are there of answering the test?

\item A girl has $4$ dresses, $2$ necklaces, and $3$ handbags. 
\begin{enumerate} \item How many different choices of outfit (dress, necklace and handbag) does she have?
\item She now buys $2$ pairs of shoes. How many choices of outfit (dress, necklace, handbag and shoes) does she now have?
\end{enumerate}

\item In a soccer tournament of $9$ teams, every team plays every other team. 
\begin{enumerate}
\item How many matches are there in the tournament?
\item If there are $5$ boys' teams and $4$ girls' teams, what is the probability that the first match will be played between $2$ girls' teams?
\end{enumerate}

\item The letters of the word 'BLUE' are rearranged randomly. How many new words (a word is any combination of letters) can be made?

\item The letters of the word 'CHEMISTRY' are arranged randomly to form a new word. What is the probability that the word will start and end with a vowel?

\item There are $2$ History classes, $5$ Accounting classes, and $4$ Mathematics classes at school. Luke wants to do all three subjects. How many possible combinations of classes are there?

\item A school netball team has $8$ members. How many ways are there to choose a captain, vice-captain, and reserve?

\item A class has $15$ boys and $10$ girls. A debating team of $4$ boys and $6$ girls must be chosen. How many ways can this be done?

\item A secret pin number is $3$ characters long, and can use any digit ($0$ to $9$) or any letter of the alphabet. Repeated characters are allowed. How many possible combinations are there?


\end{enumerate}


% CHILD SECTION END 



% CHILD SECTION END 



% CHILD SECTION START 

% \part{Exercises}
